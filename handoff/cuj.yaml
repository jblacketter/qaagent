# qaagent cuj.yaml — Critical User Journeys (example for 'sonicgrid')
version: 1
product: sonicgrid
journeys:
  - id: auth_login
    name: "User logs in"
    components: ["src/auth/*","src/api/auth/*"]
    apis: [{method: POST, endpoint: "/api/auth/login"}]
    acceptance:
      - "Valid credentials produce 200 and token"
      - "Invalid credentials produce 401"
      - "Rate limiting enforced"
  - id: dataset_upload
    name: "Upload dataset"
    components: ["src/datasets/*","src/storage/*"]
    apis: [{method: POST, endpoint: "/api/datasets"}]
    acceptance:
      - "CSV/JSON accepted"
      - "Schema inference logged"
      - "Progress and final status visible"
  - id: job_run_analysis
    name: "Run analysis job"
    components: ["src/jobs/*","src/analysis/*"]
    apis:
      - {method: POST, endpoint: "/api/jobs"}
      - {method: GET,  endpoint: "/api/jobs/{id}"}
    acceptance:
      - "Job queued → completed/failed"
      - "Logs accessible; reason surfaced"
  - id: dashboard_view
    name: "View dashboard metrics"
    components: ["src/ui/dashboard/*","templates/dashboard/*"]
    apis: []
    acceptance:
      - "KPIs render within 3s"
      - "Empty state handled"
      - "Refresh interval configurable"
coverage_targets: {auth_login:80, dataset_upload:70, job_run_analysis:70, dashboard_view:60}
