"""
Pytest configuration and fixtures for generated unit tests
Generated by QA Agent
"""

import pytest
import httpx


@pytest.fixture
def api_client():
    """
    HTTP client fixture for API testing.

    Returns an httpx.Client configured for the test API.
    """
    with httpx.Client(base_url="{{ base_url }}", timeout=10.0) as client:
        yield client


@pytest.fixture
def api_client_no_auth():
    """
    Unauthenticated HTTP client fixture for testing auth requirements.

    Returns an httpx.Client without authentication headers.
    """
    with httpx.Client(base_url="{{ base_url }}", timeout=10.0) as client:
        yield client


@pytest.fixture
def mock_db():
    """
    Mock database fixture.

    TODO: Customize based on your application's database layer.
    """
    from unittest.mock import MagicMock
    return MagicMock()


@pytest.fixture
def auth_headers():
    """
    Authentication headers fixture.

    TODO: Replace with actual auth token generation logic.
    """
    return {"Authorization": "Bearer test-token"}


@pytest.fixture
def authenticated_client(auth_headers):
    """
    Authenticated HTTP client fixture.

    Returns an httpx.Client with authentication headers.
    """
    with httpx.Client(
        base_url="{{ base_url }}",
        headers=auth_headers,
        timeout=10.0
    ) as client:
        yield client


# ============================================================================
# Test Data Fixtures - Generated with realistic data using Faker
# ============================================================================

{% for resource_name, data in resource_data.items() %}
@pytest.fixture
def sample_{{ resource_name }}_data():
    """
    Sample {{ resource_name }} data for testing.

    Generated with realistic values using Faker library.
    Modify as needed for your specific test cases.
    """
    return {{ data | tojson(indent=4) }}

{% endfor %}
